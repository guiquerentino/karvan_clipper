*************************/FUN€AO UNIFICA CREDITOS********************
PAGAMENTO()
MCRED1=0
MCRED2=0
@ 04,15 CLEAR TO 10,62
@ 04,15 TO 10,62 DOUBLE

@ 05,16 SAY "PRIMEIRO CREDITO:" GET MCRED1 PICT "9999999999" VALID ! EMPTY(MCRED1)
READ
IF LASTKEY()=27
        RETURN(.T.)
ENDIF
ORDSETFOCUS("CODIGO")
SEEK MCRED1
IF FOUND()  
        MVALOR1=VALOR
        @ 05,45 SAY MVALOR1 PICT "99999.99"
     ELSE
       ALERT('CREDITO NAO ENCONTRADO')
       UNIFICA()

ENDIF
@ 07,16 SAY "SEGUNDO  CREDITO:" GET MCRED2 PICT "9999999999" VALID ! EMPTY(MCRED2)
READ
IF LASTKEY()=27
        RETURN(.T.)
ENDIF
SEEK MCRED2
IF FOUND() .AND. MCRED1#MCRED2
        MVALOR2=VALOR
        @ 07,45 SAY MVALOR2 PICT "99999.99"
     ELSE
       ALERT('CREDITO NAO ENCONTRADO')
       UNIFICA()
ENDIF
SEEK MCRED1
BLOQUEIO()
REPLACE VALOR WITH MVALOR1+MVALOR2
UNLOCK
SEEK MCRED2
BLOQUEIO()
REPLACE VALOR   WITH 0
REPLACE CLIENTE WITH STR(MCRED1)
UNLOCK
@ 09,16 SAY "VALOR TOTAL DO CREDITO:"
@ 09,45 SAY MVALOR1+MVALOR2 PICT "99999.99"
DEVOLCRE()
ORDSETFOCUS("CREDITO")
SEEK MCRED2
IF FOUND()
        BLOQUEIO()
        REPLACE CREDITO WITH MCRED1
        UNLOCK
ENDIF
INKEY(0)
RETURN
